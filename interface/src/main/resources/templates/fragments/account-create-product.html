<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
      lang="en">
<head></head>
<body>
    <div th:fragment="account-create-product">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title"> <a href="#collapseB1" data-toggle="collapse"> Novo Produto </a> </h4>
            </div>

            <form id="categoriaPricipal" accept-charset="utf-8" method="post" enctype="multipart/form-data" th:action="@{/produto}" th:object="${produtoTO}" class="form-horizontal">
                <div class="panel-body">
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Name</label>
                        <div class="col-sm-9">
                            <input  th:field="*{nome}" type="text"  value="" class="form-control"/></div>
                        
                        <div th:if="${#fields.hasErrors('nome')}" 
                        class="alert alert-danger form-control input-md"                                      th:errors="*{nome}" role="alert"></div>
                        
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Price</label>
                        <div class="col-sm-9">
                            <input th:field="*{preco}" type="text" min="1" required="required" class="form-control"/>
                        </div>
                        <div th:if="${#fields.hasErrors('preco')}" 
                        class="alert alert-danger form-control input-md"                                      th:errors="*{preco}" role="alert"></div>
                    </div>

                    <div class="form-group">
                        <label class="col-sm-3 control-label">Imagem Principal</label>
                        <div class="col-sm-9">
                            <input th:field="*{fotoPrincipal}" type="file" class="filestyle"/>
                            <span class="help-block"></span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Photo 1</label>
                        <div class="col-sm-9">
                            <input th:field="*{file}" type="file" class="filestyle"/>
                            <span class="help-block"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Photo 2</label>
                        <div class="col-sm-9">
                            <input th:field="*{file2}" type="file"  class="filestyle"/>
                            <span class="help-block"></span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-3 control-label">Photo 3</label>
                        <div class="col-sm-9">
                            <input th:field="*{file3}" type="file"  class="filestyle"/>
                            <span class="help-block"></span>
                        </div>
                    </div>
                    <div class="col-md-3">

                        <form name="categoriaPricipal">
                            <select name="catPrincipal" multiple="multiple" size="8" style="width: 90%">
                                <option th:each="categoria  : ${categoriasPrincipais}" th:attr="value=${categoria.id}" th:text="${categoria.nome}" onclick="subCategoria(1)"></option>
                            </select>
                            <!--<input type="submit" />-->
                        </form>

                    </div>

                    <div class="col-md-3">
                        <div id="resultBlock2">
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div id="resultBlock3">
                        </div>
                    </div>

                    <div class="col-md-3">
                        <div id="resultBlock4">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div id="resultBlock5">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div id="resultBlock6">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div id="resultBlock7">
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div id="resultBlock8">
                        </div>
                    </div>
                </div>
                <div class="panel-footer">
                    <div class="row">
                        <div class="col-sm-offset-3 col-sm-9">
                            <button type="submit" class="btn btn-custom"><i class="fa fa-save"></i> Publish</button>
                            <button type="submit" class="btn btn-default"><i class="fa fa-close"></i> Cancel</button>
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div>

</body>
    <script type="text/javascript">
                    (function($){
                          var $form = $('#categoriaPricipal');
                          $form.on('submit', function(e) {
                            e.preventDefault();
                            $.ajax({
                              url: $form.attr('action'),
                              type: 'post',
                              data: $form.serialize(),
                              success: function(response) {
                                // if the response contains any errors, replace the form
                                if ($(response).find('.has-error').length) {
                                  $form.replaceWith(response);
                                } else {
                                  // in this case we can actually replace the form
                                  // with the response as well, unless we want to 
                                  // show the success message a different way
                                    window.alert("Produto Cadastrado com sucesso")
                                }
                              }
                          });
                        }(jQuery));     
        
    </script>
</html>